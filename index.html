<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Star Wars Alert</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <img src="https://raw.githubusercontent.com/Ayeril/starwars-overlay/main/assets/bg.jpg" alt="Background" class="background-img">
    <div class="left-character">
      <img src="https://raw.githubusercontent.com/Ayeril/starwars-overlay/main/assets/vader.png" alt="Darth Vader" />
    </div>
    <div class="text">
      <p><span class="amount">{amount}</span> dari <span class="donator">{donator}</span></p>
      <p class="message">{message}</p>
    </div>
    <div class="right-character">
      <img src="https://raw.githubusercontent.com/Ayeril/starwars-overlay/main/assets/Cal-Kestis.png" alt="Cal Kestis" />
    </div>
  </div>

  <audio id="saberSound" src="https://raw.githubusercontent.com/Ayeril/starwars-overlay/main/assets/lightsaber.mp3" preload="auto"></audio>

  <script>
    const sound = document.getElementById('saberSound');
    sound.volume = 0.5;

    window.addEventListener('load', () => {
      sound.play().catch(() => {});
    });

    function updateDonation(amount, donator, message) {
      const textEl = document.querySelector('.text');
      textEl.querySelector('.amount').textContent = amount;
      textEl.querySelector('.donator').textContent = donator;
      textEl.querySelector('.message').textContent = message;

      // Restart animasi
      textEl.style.animation = 'none';
      void textEl.offsetWidth; // reflow hack
      textEl.style.animation = null;

      // Mainkan suara
      sound.currentTime = 0;
      sound.play().catch(() => {});
    }

    const demoDonations = [
      { amount: 'Rp 50.000', donator: 'Stormtrooper999', message: 'Semoga the Force selalu menyertaimu!' },
      { amount: 'Rp 200.000', donator: 'JediMaster', message: 'Untuk kejayaan Jedi!' },
      { amount: 'Rp 75.000', donator: 'SithLord', message: 'Kekuatan gelap mendukungmu!' }
    ];

    let idx = 0;
    setInterval(() => {
      updateDonation(demoDonations[idx].amount, demoDonations[idx].donator, demoDonations[idx].message);
      idx = (idx + 1) % demoDonations.length;
    }, 10000);

    window.onload = () => {
      updateDonation(demoDonations[0].amount, demoDonations[0].donator, demoDonations[0].message);
    };
  </script>
</body>
</html>
